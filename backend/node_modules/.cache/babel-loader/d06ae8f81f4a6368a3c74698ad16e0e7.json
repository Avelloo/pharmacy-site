{"ast":null,"code":"import _toConsumableArray from\"C:/Users/aloob/Desktop/pharmacy-site/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/aloob/Desktop/pharmacy-site/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{useDispatch,useSelector}from'react-redux';import{detailsProducts}from'../actions/productActions';import LoadingBox from'../components/LoadingBox';import MessageBox from'../components/MessageBox';import Rating from'../components/Rating';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function ProductScreen(props){var dispatch=useDispatch();var productId=props.match.params.id;var _useState=useState(1),_useState2=_slicedToArray(_useState,2),qty=_useState2[0],setQty=_useState2[1];var productDetails=useSelector(function(state){return state.productDetails;});var loading=productDetails.loading,error=productDetails.error,product=productDetails.product;useEffect(function(){dispatch(detailsProducts(productId));},[dispatch,productId]);var addToCartHandler=function addToCartHandler(){props.history.push(\"/cart/\".concat(productId,\"?qty=\").concat(qty));};return/*#__PURE__*/_jsx(\"div\",{children:loading?/*#__PURE__*/_jsx(LoadingBox,{}):error?/*#__PURE__*/_jsx(MessageBox,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"a\",{href:\"/\",onClick:function onClick(){window.location.href=\"/\";},children:\"\\u041D\\u0430 \\u0433\\u043B\\u0430\\u0432\\u043D\\u0443\\u044E\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"row top\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-2\",children:/*#__PURE__*/_jsx(\"img\",{className:\"large\",src:product.image,alt:product.name})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-1\",children:/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"h1\",{children:product.name})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Rating,{rating:product.rating,numReviews:product.numReviews})}),/*#__PURE__*/_jsxs(\"li\",{children:[\"\\u0426\\u0435\\u043D\\u0430: \",product.price,\" \\u0420\\u0443\\u0431.\"]}),/*#__PURE__*/_jsxs(\"li\",{children:[\"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435: \",/*#__PURE__*/_jsx(\"p\",{children:product.description})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-1\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card card-body\",children:/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{children:\"\\u0426\\u0435\\u043D\\u0430:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"price\",children:[product.price,\" \\u0420\\u0443\\u0431.\"]})]})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{children:\"\\u0421\\u0442\\u0430\\u0442\\u0443\\u0441:\"}),/*#__PURE__*/_jsx(\"div\",{children:product.countInStock>0?/*#__PURE__*/_jsx(\"span\",{className:\"success\",children:\"\\u0415\\u0441\\u0442\\u044C \\u0432 \\u043D\\u0430\\u043B\\u0438\\u0447\\u0438\\u0438\"}):/*#__PURE__*/_jsx(\"span\",{className:\"danger\",children:\"\\u0422\\u043E\\u0432\\u0430\\u0440 \\u043E\\u0442\\u0441\\u0443\\u0442\\u0441\\u0442\\u0432\\u0443\\u0435\\u0442\"})})]})}),product.countInStock>0&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"li\",{className:\"qtySelector\",children:[/*#__PURE__*/_jsx(\"div\",{children:\"\\u041A\\u043E\\u043B-\\u0432\\u043E:\"}),/*#__PURE__*/_jsx(\"select\",{value:qty,onChange:function onChange(e){return setQty(e.target.value);},children:_toConsumableArray(Array(product.countInStock).keys()).map(function(x){return/*#__PURE__*/_jsx(\"option\",{value:x+1,children:x+1},x+1);})})]}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:addToCartHandler,className:\"primary block\",children:\"\\u0412 \\u043A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0443\"})})]})]})})})]})]})});}","map":{"version":3,"sources":["C:/Users/aloob/Desktop/pharmacy-site/frontend/src/screens/ProductScreen.js"],"names":["React","useEffect","useState","useDispatch","useSelector","detailsProducts","LoadingBox","MessageBox","Rating","ProductScreen","props","dispatch","productId","match","params","id","qty","setQty","productDetails","state","loading","error","product","addToCartHandler","history","push","window","location","href","image","name","rating","numReviews","price","description","countInStock","e","target","value","Array","keys","map","x"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { detailsProducts } from '../actions/productActions';\r\nimport LoadingBox from '../components/LoadingBox';\r\nimport MessageBox from '../components/MessageBox';\r\nimport Rating from '../components/Rating';\r\n\r\nexport default function ProductScreen(props) {\r\n  const dispatch = useDispatch();\r\n  const productId = props.match.params.id;\r\n  const [qty, setQty] = useState(1);\r\n  const productDetails = useSelector((state) => state.productDetails);\r\n  const { loading, error, product } = productDetails;\r\n\r\n  useEffect(() => {\r\n    dispatch(detailsProducts(productId));\r\n  }, [dispatch, productId]);\r\n\r\n  const addToCartHandler = () => {\r\n    props.history.push(`/cart/${productId}?qty=${qty}`);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {loading ? (\r\n        <LoadingBox></LoadingBox>\r\n      ) : error ? (\r\n        <MessageBox variant=\"danger\">{error}</MessageBox>\r\n      ) : (\r\n        <div>\r\n          <a href='/' onClick={() => { window.location.href = \"/\" }}>На главную</a>\r\n          <div className='row top'>\r\n            <div className='col-2'>\r\n              <img className='large' src={product.image} alt={product.name}></img>\r\n            </div>\r\n\r\n            <div className='col-1'>\r\n              <ul>\r\n                <li>\r\n                  <h1>{product.name}</h1>\r\n                </li>\r\n                <li>\r\n                  <Rating rating={product.rating} numReviews={product.numReviews}></Rating>\r\n                </li>\r\n                <li>\r\n                  Цена: {product.price} Руб.\r\n                </li>\r\n                <li>\r\n                  Описание: <p>{product.description}</p>\r\n                </li>\r\n              </ul>\r\n            </div>\r\n\r\n            <div className='col-1'>\r\n              <div className='card card-body'>\r\n                <ul>\r\n                  <li>\r\n                    <div className='row'>\r\n                      <div>Цена:</div>\r\n                      <div className='price'>{product.price} Руб.</div>\r\n                    </div>\r\n                  </li>\r\n                  <li>\r\n                    <div className='row'>\r\n                      <div>Статус:</div>\r\n                      <div>{product.countInStock > 0 ? <span className='success'>Есть в наличии</span> :\r\n                        <span className='danger'>Товар отсутствует</span>}</div>\r\n                    </div>\r\n                  </li>\r\n                  {\r\n                    product.countInStock > 0 && (\r\n                      <>\r\n                        <li className='qtySelector'>\r\n                          <div>Кол-во:</div>\r\n                            <select  value={qty} onChange={e => setQty(e.target.value)}>\r\n                              {[...Array(product.countInStock).keys()].map(x => (\r\n                                <option key={x + 1} value={x + 1}>{x + 1}</option>\r\n                              )\r\n                              )}\r\n                            </select>\r\n                        </li>\r\n                        <li>\r\n                          <button onClick={addToCartHandler} className='primary block'>В корзину</button>\r\n                        </li>\r\n                      </>\r\n                    )\r\n                  }\r\n\r\n                </ul>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n\r\n  )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}