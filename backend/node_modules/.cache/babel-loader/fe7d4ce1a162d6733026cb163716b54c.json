{"ast":null,"code":"import React,{useEffect}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{Link}from\"react-router-dom\";import{addToCart}from\"../actions/cartActions\";import CartItem from\"../components/CartItem\";import MessageBox from\"../components/MessageBox\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function CartScreen(props){var productId=props.match.params.id;var qty=props.location.search?Number(props.location.search.split(\"=\")[1]):1;var cart=useSelector(function(state){return state.cart;});var cartItems=cart.cartItems;var dispatch=useDispatch();useEffect(function(){if(productId){dispatch(addToCart(productId,qty));}},[dispatch,productId,qty]);var checkoutHandler=function checkoutHandler(){props.history.push(\"/signin?redirect=shipping\");};function declOfNum(number,titles){var cases=[2,0,1,1,1,2];return titles[number%100>4&&number%100<20?2:cases[number%10<5?number%10:5]];}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"row center\",children:\"\\u041A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0430\"}),cartItems.length===0?true:/*#__PURE__*/_jsx(\"div\",{className:\"card card-body center\",children:/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"h2\",{children:[\"\\u0418\\u0442\\u043E\\u0433\\u043E (\",cartItems.reduce(function(a,c){return a+c.qty;},0),\" \",declOfNum(cartItems.reduce(function(a,c){return a+c.qty;},0),[\"товар\",\"товара\",\"товаров\"]),\"): \",cartItems.reduce(function(a,c){return a+c.price*c.qty;},0),\" \\u0440\\u0443\\u0431.\"]})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:checkoutHandler,className:\"primary block\",disabled:cartItems.length===0,children:\"\\u041A \\u043E\\u043F\\u043B\\u0430\\u0442\\u0435\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"row centerCart\",children:cartItems.length===0?/*#__PURE__*/_jsxs(MessageBox,{children:[\"\\u0412 \\u043A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0435 \\u043D\\u0438\\u0447\\u0435\\u0433\\u043E \\u043D\\u0435\\u0442.\",/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0412\\u044B\\u0431\\u0440\\u0430\\u0442\\u044C \\u0442\\u043E\\u0432\\u0430\\u0440\\u044B?\"})})]}):/*#__PURE__*/_jsx(_Fragment,{children:cartItems.map(function(cartItem){return/*#__PURE__*/_jsx(CartItem,{cartItem:cartItem},cartItem._id);})})})]});}","map":{"version":3,"sources":["C:/Users/aloob/Desktop/pharmacy-site/frontend/src/screens/CartScreen.js"],"names":["React","useEffect","useDispatch","useSelector","Link","addToCart","CartItem","MessageBox","CartScreen","props","productId","match","params","id","qty","location","search","Number","split","cart","state","cartItems","dispatch","checkoutHandler","history","push","declOfNum","number","titles","cases","length","reduce","a","c","price","map","cartItem","_id"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport { addToCart } from \"../actions/cartActions\";\nimport CartItem from \"../components/CartItem\";\nimport MessageBox from \"../components/MessageBox\";\n\nexport default function CartScreen(props) {\n  const productId = props.match.params.id;\n  const qty = props.location.search\n    ? Number(props.location.search.split(\"=\")[1])\n    : 1;\n\n  const cart = useSelector((state) => state.cart);\n  const { cartItems } = cart;\n  const dispatch = useDispatch();\n  useEffect(() => {\n    if (productId) {\n      dispatch(addToCart(productId, qty));\n    }\n  }, [dispatch, productId, qty]);\n\n  const checkoutHandler = () => {\n    props.history.push(`/signin?redirect=shipping`);\n  };\n\n  function declOfNum(number, titles) {\n    let cases = [2, 0, 1, 1, 1, 2];\n    return titles[\n      number % 100 > 4 && number % 100 < 20\n        ? 2\n        : cases[number % 10 < 5 ? number % 10 : 5]\n    ];\n  }\n\n  return (\n    <>\n    <h1 className=\"row center\">Корзина</h1>\n      {cartItems.length === 0 ? (\n        true\n      ) : (\n        <div className=\"card card-body center\">\n          <ul>\n            <li>\n              <h2>\n                Итого ({cartItems.reduce((a, c) => a + c.qty, 0)}{\" \"}\n                {declOfNum(\n                  cartItems.reduce((a, c) => a + c.qty, 0),\n                  [\"товар\", \"товара\", \"товаров\"]\n                )}\n                ): {cartItems.reduce((a, c) => a + c.price * c.qty, 0)} руб.\n              </h2>\n            </li>\n            <li>\n              <button\n                type=\"button\"\n                onClick={checkoutHandler}\n                className=\"primary block\"\n                disabled={cartItems.length === 0}\n              >\n                К оплате\n              </button>\n            </li>\n          </ul>\n        </div>\n      )}\n      <div className=\"row centerCart\">\n        {cartItems.length === 0 ? (\n          <MessageBox>\n            В корзине ничего нет.\n            <Link to=\"/\">\n              <h2>Выбрать товары?</h2>\n            </Link>\n          </MessageBox>\n        ) : (\n          <>\n            {cartItems.map((cartItem) => (\n              <CartItem key={cartItem._id} cartItem={cartItem}></CartItem>\n            ))}\n          </>\n        )}\n      </div>\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}