{"ast":null,"code":"import React,{useEffect}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{createProduct,deleteProduct,listProducts}from\"../actions/productActions\";import LoadingBox from\"../components/LoadingBox\";import MessageBox from\"../components/MessageBox\";import{PRODUCT_CREATE_RESET,PRODUCT_DELETE_RESET}from\"../constants/productConstants\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function ProductListScreen(props){var sellerMode=props.match.path.indexOf(\"/seller\")>=0;var productList=useSelector(function(state){return state.productList;});var loading=productList.loading,error=productList.error,products=productList.products;var productCreate=useSelector(function(state){return state.productCreate;});var loadingCreate=productCreate.loading,errorCreate=productCreate.error,successCreate=productCreate.success,createdProduct=productCreate.product;var productDelete=useSelector(function(state){return state.productDelete;});var loadingDelete=productDelete.loading,errorDelete=productDelete.error,successDelete=productDelete.success;var userSignin=useSelector(function(state){return state.userSignin;});var userInfo=userSignin.userInfo;var dispatch=useDispatch();useEffect(function(){if(successCreate){dispatch({type:PRODUCT_CREATE_RESET});props.history.push(\"/product/\".concat(createdProduct._id,\"/edit\"));}if(successDelete){dispatch({type:PRODUCT_DELETE_RESET});}dispatch(listProducts({seller:sellerMode?userInfo._id:\"\"}));},[createdProduct,dispatch,props.history,sellerMode,successCreate,successDelete,userInfo._id]);var deleteHandler=function deleteHandler(product){if(window.confirm(\"Вы уверены?\")){dispatch(deleteProduct(product._id));}};var createHandler=function createHandler(){dispatch(createProduct());};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"row center\",children:\"\\u0423\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435 \\u0442\\u043E\\u0432\\u0430\\u0440\\u0430\\u043C\\u0438\"}),loadingDelete&&/*#__PURE__*/_jsx(LoadingBox,{}),errorDelete&&/*#__PURE__*/_jsx(MessageBox,{variant:\"danger\",children:errorDelete}),loadingCreate&&/*#__PURE__*/_jsx(LoadingBox,{}),errorCreate&&/*#__PURE__*/_jsx(MessageBox,{variant:\"danger\",children:errorCreate}),loading?/*#__PURE__*/_jsx(LoadingBox,{}):error?/*#__PURE__*/_jsx(MessageBox,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{style:{width:'fit-content'},children:\"\\u041D\\u0430\\u0438\\u043C\\u0435\\u043D\\u043E\\u0432\\u0430\\u043D\\u0438\\u0435\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0426\\u0435\\u043D\\u0430\"}),/*#__PURE__*/_jsx(\"th\",{style:{width:'1px'},children:\"\\u041A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u041F\\u043E\\u0441\\u0442\\u0430\\u0432\\u0449\\u0438\\u043A\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0424\\u043E\\u0440\\u043C\\u0430 \\u0432\\u044B\\u043F\\u0443\\u0441\\u043A\\u0430\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0414\\u0435\\u0439\\u0441\\u0442\\u0432\\u0438\\u044F\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:products.map(function(product){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:product._id}),/*#__PURE__*/_jsx(\"td\",{style:{minWidth:'fit-content'},children:product.name}),/*#__PURE__*/_jsxs(\"td\",{children:[product.price,\" \\u0420\\u0443\\u0431.\"]}),/*#__PURE__*/_jsx(\"td\",{style:{minWidth:'min-content'},children:product.category}),/*#__PURE__*/_jsx(\"td\",{children:product.provider}),/*#__PURE__*/_jsx(\"td\",{children:product.formRelease}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"small\",onClick:function onClick(){return props.history.push(\"/product/\".concat(product._id,\"/edit\"));},children:\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"small\",onClick:function onClick(){return deleteHandler(product);},children:\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"})]})]},product._id);})})]}),/*#__PURE__*/_jsx(\"button\",{style:{width:\"20%\",margin:\"2rem 40%\",borderRadius:\"0\"},type:\"button\",className:\"shadow\",onClick:createHandler,children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u043D\\u043E\\u0432\\u044B\\u0439 \\u0442\\u043E\\u0432\\u0430\\u0440\"})]});}","map":{"version":3,"sources":["C:/Users/aloob/Desktop/pharmacy-site/frontend/src/screens/ProductListScreen.js"],"names":["React","useEffect","useDispatch","useSelector","createProduct","deleteProduct","listProducts","LoadingBox","MessageBox","PRODUCT_CREATE_RESET","PRODUCT_DELETE_RESET","ProductListScreen","props","sellerMode","match","path","indexOf","productList","state","loading","error","products","productCreate","loadingCreate","errorCreate","successCreate","success","createdProduct","product","productDelete","loadingDelete","errorDelete","successDelete","userSignin","userInfo","dispatch","type","history","push","_id","seller","deleteHandler","window","confirm","createHandler","width","map","minWidth","name","price","category","provider","formRelease","margin","borderRadius"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport {\n  createProduct,\n  deleteProduct,\n  listProducts,\n} from \"../actions/productActions\";\nimport LoadingBox from \"../components/LoadingBox\";\nimport MessageBox from \"../components/MessageBox\";\nimport {\n  PRODUCT_CREATE_RESET,\n  PRODUCT_DELETE_RESET,\n} from \"../constants/productConstants\";\n\nexport default function ProductListScreen(props) {\n  const sellerMode = props.match.path.indexOf(\"/seller\") >= 0;\n  const productList = useSelector((state) => state.productList);\n  const { loading, error, products } = productList;\n  const productCreate = useSelector((state) => state.productCreate);\n  const {\n    loading: loadingCreate,\n    error: errorCreate,\n    success: successCreate,\n    product: createdProduct,\n  } = productCreate;\n\n  const productDelete = useSelector((state) => state.productDelete);\n  const {\n    loading: loadingDelete,\n    error: errorDelete,\n    success: successDelete,\n  } = productDelete;\n\n  const userSignin = useSelector((state) => state.userSignin);\n  const { userInfo } = userSignin;\n\n  const dispatch = useDispatch();\n  useEffect(() => {\n    if (successCreate) {\n      dispatch({ type: PRODUCT_CREATE_RESET });\n      props.history.push(`/product/${createdProduct._id}/edit`);\n    }\n    if (successDelete) {\n      dispatch({ type: PRODUCT_DELETE_RESET });\n    }\n    dispatch(listProducts({ seller: sellerMode ? userInfo._id : \"\" }));\n  }, [\n    createdProduct,\n    dispatch,\n    props.history,\n    sellerMode,\n    successCreate,\n    successDelete,\n    userInfo._id,\n  ]);\n\n  const deleteHandler = (product) => {\n    if (window.confirm(\"Вы уверены?\")) {\n      dispatch(deleteProduct(product._id));\n    }\n  };\n  const createHandler = () => {\n    dispatch(createProduct());\n  };\n  return (\n    <div>\n    <h1 className=\"row center\">Управление товарами</h1>\n\n      {loadingDelete && <LoadingBox></LoadingBox>}\n      {errorDelete && <MessageBox variant=\"danger\">{errorDelete}</MessageBox>}\n\n      {loadingCreate && <LoadingBox></LoadingBox>}\n      {errorCreate && <MessageBox variant=\"danger\">{errorCreate}</MessageBox>}\n      {loading ? (\n        <LoadingBox></LoadingBox>\n      ) : error ? (\n        <MessageBox variant=\"danger\">{error}</MessageBox>\n      ) : (\n        <table className=\"table\">\n          <thead>\n            <tr>\n              <th>ID</th>\n              <th style={{width:'fit-content'}}>Наименование</th>\n              <th>Цена</th>\n              <th style={{width:'1px'}}>Категория</th>\n              <th>Поставщик</th>\n              <th>Форма выпуска</th>\n              <th>Действия</th>\n            </tr>\n          </thead>\n          <tbody>\n            {products.map((product) => (\n              <tr key={product._id}>\n                <td>{product._id}</td>\n                <td style={{ minWidth:'fit-content'}}>{product.name}</td>\n                <td>{product.price} Руб.</td>\n                <td style={{ minWidth:'min-content'}}>{product.category}</td>\n                <td>{product.provider}</td>\n                <td>{product.formRelease}</td>\n                <td>\n                  <button\n                    type=\"button\"\n                    className=\"small\"\n                    onClick={() =>\n                      props.history.push(`/product/${product._id}/edit`)\n                    }\n                  >\n                    Редактировать\n                  </button>\n                  <button\n                    type=\"button\"\n                    className=\"small\"\n                    onClick={() => deleteHandler(product)}\n                  >\n                    Удалить\n                  </button>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      )}\n      <button\n        style={{ width: \"20%\",margin: \"2rem 40%\",  borderRadius: \"0\" }}\n        type=\"button\"\n        className=\"shadow\"\n        onClick={createHandler}\n      >\n        Добавить новый товар\n      </button>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}