{"ast":null,"code":"import React,{useEffect}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{listProductCategories,deleteCategory,createCategory}from\"../actions/productActions\";import LoadingBox from\"../components/LoadingBox\";import MessageBox from\"../components/MessageBox\";import{PRODUCT_FORMRELEASE_CREATE_RESET,PRODUCT_FORMRELEASE_DELETE_RESET}from\"../constants/productConstants\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function CategoryScreen(props){var categoryList=useSelector(function(state){return state.productCategoryList;});var loading=categoryList.loading,error=categoryList.error,categories=categoryList.categories;var categoryDelete=useSelector(function(state){return state.productCategoryDelete;});var categoryCreate=useSelector(function(state){return state.productCategoryCreate;});var loadingCreate=categoryCreate.loading,errorCreate=categoryCreate.error,successCreate=categoryCreate.success,createdCategory=categoryCreate.category;var loadingDelete=categoryDelete.loading,errorDelete=categoryDelete.error,successDelete=categoryDelete.success;var dispatch=useDispatch();useEffect(function(){if(successCreate){dispatch({type:PRODUCT_FORMRELEASE_CREATE_RESET});props.history.push(\"/category/\".concat(createdCategory._id,\"/edit\"));window.location.reload(false);}if(successDelete){dispatch({type:PRODUCT_FORMRELEASE_DELETE_RESET});window.location.reload(false);}dispatch(listProductCategories());},[createdCategory,dispatch,props.history,successCreate,successDelete]);var clickHandler=function clickHandler(){dispatch(createCategory());};var deleteHandler=function deleteHandler(category){if(window.confirm(\"Вы уверены?\")){dispatch(deleteCategory(category._id));}};return/*#__PURE__*/_jsxs(\"div\",{className:\"tableDiv\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"row center\",children:\"\\u0423\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435 \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F\\u043C\\u0438\"}),loadingDelete&&/*#__PURE__*/_jsx(LoadingBox,{}),errorDelete&&/*#__PURE__*/_jsx(MessageBox,{variant:\"danger\",children:errorDelete}),loadingCreate&&/*#__PURE__*/_jsx(LoadingBox,{}),errorCreate&&/*#__PURE__*/_jsx(MessageBox,{variant:\"danger\",children:errorCreate}),loading?/*#__PURE__*/_jsx(LoadingBox,{}):error?/*#__PURE__*/_jsx(MessageBox,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u041D\\u0430\\u0438\\u043C\\u0435\\u043D\\u043E\\u0432\\u0430\\u043D\\u0438\\u0435 \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u0438\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0414\\u0435\\u0439\\u0441\\u0442\\u0432\\u0438\\u044F\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:categories.map(function(category){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:category._id}),/*#__PURE__*/_jsx(\"td\",{children:category.name}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"small\",onClick:function onClick(){return props.history.push(\"/category/\".concat(category._id,\"/edit\"));},children:\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"small\",onClick:function onClick(){return deleteHandler(category);},children:\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"})]})]},category._id);})})]}),/*#__PURE__*/_jsx(\"button\",{style:{width:\"20%\",margin:\"2rem 40%\",borderRadius:\"0\"},type:\"button\",className:\"shadow\",onClick:clickHandler,children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u043D\\u043E\\u0432\\u0443\\u044E \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044E\"})]});}","map":{"version":3,"sources":["C:/Users/aloob/Desktop/pharmacy-site/frontend/src/screens/CategoryScreen.js"],"names":["React","useEffect","useDispatch","useSelector","listProductCategories","deleteCategory","createCategory","LoadingBox","MessageBox","PRODUCT_FORMRELEASE_CREATE_RESET","PRODUCT_FORMRELEASE_DELETE_RESET","CategoryScreen","props","categoryList","state","productCategoryList","loading","error","categories","categoryDelete","productCategoryDelete","categoryCreate","productCategoryCreate","loadingCreate","errorCreate","successCreate","success","createdCategory","category","loadingDelete","errorDelete","successDelete","dispatch","type","history","push","_id","window","location","reload","clickHandler","deleteHandler","confirm","map","name","width","margin","borderRadius"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport {\n  listProductCategories,\n  deleteCategory,\n  createCategory,\n} from \"../actions/productActions\";\nimport LoadingBox from \"../components/LoadingBox\";\nimport MessageBox from \"../components/MessageBox\";\nimport {\n\n  PRODUCT_FORMRELEASE_CREATE_RESET,\n  PRODUCT_FORMRELEASE_DELETE_RESET,\n\n} from \"../constants/productConstants\";\n\nexport default function CategoryScreen(props) {\n  const categoryList = useSelector((state) => state.productCategoryList);\n  const { loading, error, categories } = categoryList;\n\n  const categoryDelete = useSelector(\n    (state) => state.productCategoryDelete\n  );\n  const categoryCreate = useSelector(\n    (state) => state.productCategoryCreate\n  );\n  const {\n    loading: loadingCreate,\n    error: errorCreate,\n    success: successCreate,\n    category: createdCategory,\n  } = categoryCreate;\n  const {\n    loading: loadingDelete,\n    error: errorDelete,\n    success: successDelete,\n  } = categoryDelete;\n\n  const dispatch = useDispatch();\n  useEffect(() => {\n    if (successCreate) {\n      dispatch({ type: PRODUCT_FORMRELEASE_CREATE_RESET });\n      props.history.push(`/category/${createdCategory._id}/edit`);\n      window.location.reload(false);\n    }\n    if (successDelete) {\n      dispatch({ type: PRODUCT_FORMRELEASE_DELETE_RESET });\n      window.location.reload(false);\n    }\n    dispatch(listProductCategories());\n  }, [\n    createdCategory,\n    dispatch,\n    props.history,\n    successCreate,\n    successDelete,\n  ]);\n\n  const clickHandler = () => {\n    dispatch(createCategory());\n  };\n  const deleteHandler = (category) => {\n    if (window.confirm(\"Вы уверены?\")) {\n      dispatch(deleteCategory(category._id));\n    }\n  };\n\n  return (\n    <div className=\"tableDiv\">\n    <h1 className=\"row center\">Управление категориями</h1>\n      \n      {loadingDelete && <LoadingBox></LoadingBox>}\n      {errorDelete && <MessageBox variant=\"danger\">{errorDelete}</MessageBox>}\n\n      {loadingCreate && <LoadingBox></LoadingBox>}\n      {errorCreate && <MessageBox variant=\"danger\">{errorCreate}</MessageBox>}\n      {loading ? (\n        <LoadingBox></LoadingBox>\n      ) : error ? (\n        <MessageBox variant=\"danger\">{error}</MessageBox>\n      ) : (\n        <table className=\"table\">\n          <thead>\n            <tr>\n              <th>ID</th>\n              <th>Наименование категории</th>\n              <th>Действия</th>\n            </tr>\n          </thead>\n          <tbody>\n            {categories.map((category) => (\n              <tr key={category._id}>\n                <td>{category._id}</td>\n                <td>{category.name}</td>\n                <td>\n                  <button\n                    type=\"button\"\n                    className=\"small\"\n                    onClick={() =>\n                      props.history.push(`/category/${category._id}/edit`)\n                    }\n                  >\n                    Редактировать\n                  </button>\n                  <button\n                    type=\"button\"\n                    className=\"small\"\n                    onClick={() => deleteHandler(category)}\n                  >\n                    Удалить\n                  </button>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n        \n      )}\n      <button\n        style={{ width: \"20%\",margin: \"2rem 40%\",  borderRadius: \"0\" }}\n        type=\"button\"\n        className=\"shadow\"\n        onClick={clickHandler}\n      >\n        Добавить новую категорию\n      </button>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}