{"ast":null,"code":"import React,{useEffect}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{deleteUser,listUsers}from\"../actions/userActions\";import LoadingBox from\"../components/LoadingBox\";import MessageBox from\"../components/MessageBox\";import{USER_DETAILS_RESET}from\"../constants/userConstants\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function UserListScreen(props){var userList=useSelector(function(state){return state.userList;});var loading=userList.loading,error=userList.error,users=userList.users;var userDelete=useSelector(function(state){return state.userDelete;});var loadingDelete=userDelete.loading,errorDelete=userDelete.error,successDelete=userDelete.success;var dispatch=useDispatch();useEffect(function(){dispatch(listUsers());dispatch({type:USER_DETAILS_RESET});},[dispatch,successDelete]);var deleteHandler=function deleteHandler(user){if(window.confirm(\"Вы уверены?\")){dispatch(deleteUser(user._id));}};return/*#__PURE__*/_jsxs(\"div\",{className:\"tableDiv\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"row center\",children:\"\\u0423\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435 \\u043A\\u043B\\u0438\\u0435\\u043D\\u0442\\u0430\\u043C\\u0438\"}),loadingDelete&&/*#__PURE__*/_jsx(LoadingBox,{}),errorDelete&&/*#__PURE__*/_jsx(MessageBox,{variant:\"danger\",children:errorDelete}),successDelete&&/*#__PURE__*/_jsx(MessageBox,{variant:\"success\",children:\"\\u041A\\u043B\\u0438\\u0435\\u043D\\u0442 \\u0443\\u0434\\u0430\\u043B\\u0435\\u043D \\u0443\\u0441\\u043F\\u0435\\u0448\\u043D\\u043E\"}),loading?/*#__PURE__*/_jsx(LoadingBox,{}):error?/*#__PURE__*/_jsx(MessageBox,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0418\\u043C\\u044F\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0414\\u0435\\u0439\\u0441\\u0442\\u0432\\u0438\\u044F\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:users.filter(function(generalUser){return!generalUser.isAdmin&&!generalUser.isWorker;}).map(function(user){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:user._id}),/*#__PURE__*/_jsx(\"td\",{children:user.name}),/*#__PURE__*/_jsx(\"td\",{children:user.email}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"small\",onClick:function onClick(){return props.history.push(\"/user/\".concat(user._id,\"/edit\"));},children:\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"small\",onClick:function onClick(){return deleteHandler(user);},children:\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"})]})]},user._id);})})]})]});}","map":{"version":3,"sources":["C:/Users/aloob/Desktop/pharmacy-site/frontend/src/screens/UserListScreen.js"],"names":["React","useEffect","useDispatch","useSelector","deleteUser","listUsers","LoadingBox","MessageBox","USER_DETAILS_RESET","UserListScreen","props","userList","state","loading","error","users","userDelete","loadingDelete","errorDelete","successDelete","success","dispatch","type","deleteHandler","user","window","confirm","_id","filter","generalUser","isAdmin","isWorker","map","name","email","history","push"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { deleteUser, listUsers } from \"../actions/userActions\";\nimport LoadingBox from \"../components/LoadingBox\";\nimport MessageBox from \"../components/MessageBox\";\nimport { USER_DETAILS_RESET } from \"../constants/userConstants\";\n\nexport default function UserListScreen(props) {\n  const userList = useSelector((state) => state.userList);\n  const { loading, error, users } = userList;\n\n  const userDelete = useSelector((state) => state.userDelete);\n  const {\n    loading: loadingDelete,\n    error: errorDelete,\n    success: successDelete,\n  } = userDelete;\n\n  const dispatch = useDispatch();\n  useEffect(() => {\n    dispatch(listUsers());\n    dispatch({\n      type: USER_DETAILS_RESET,\n    });\n  }, [dispatch, successDelete]);\n  const deleteHandler = (user) => {\n    if (window.confirm(\"Вы уверены?\")) {\n      dispatch(deleteUser(user._id));\n    }\n  };\n  return (\n    <div className=\"tableDiv\">\n    <h1 className=\"row center\">Управление клиентами</h1>\n      {loadingDelete && <LoadingBox></LoadingBox>}\n      {errorDelete && <MessageBox variant=\"danger\">{errorDelete}</MessageBox>}\n      {successDelete && (\n        <MessageBox variant=\"success\">Клиент удален успешно</MessageBox>\n      )}\n      {loading ? (\n        <LoadingBox></LoadingBox>\n      ) : error ? (\n        <MessageBox variant=\"danger\">{error}</MessageBox>\n      ) : (\n        <table className=\"table\">\n          <thead>\n            <tr>\n              <th>ID</th>\n              <th>Имя</th>\n              <th>Email</th>\n              <th>Действия</th>\n            </tr>\n          </thead>\n          <tbody>\n            {users\n              .filter(\n                (generalUser) => !generalUser.isAdmin && !generalUser.isWorker\n              )\n              .map((user) => (\n                <tr key={user._id}>\n                  <td>{user._id}</td>\n                  <td>{user.name}</td>\n                  <td>{user.email}</td>\n                  <td>\n                    <button\n                      type=\"button\"\n                      className=\"small\"\n                      onClick={() =>\n                        props.history.push(`/user/${user._id}/edit`)\n                      }\n                    >\n                      Редактировать\n                    </button>\n                    <button\n                      type=\"button\"\n                      className=\"small\"\n                      onClick={() => deleteHandler(user)}\n                    >\n                      Удалить\n                    </button>\n                  </td>\n                </tr>\n              ))}\n          </tbody>\n        </table>\n      )}\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}