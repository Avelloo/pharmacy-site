{"ast":null,"code":"import _toConsumableArray from\"C:/Users/aloob/Desktop/pharmacy-site/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import React,{useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import Chart from'react-google-charts';import{summaryOrder}from'../actions/orderActions';import LoadingBox from'../components/LoadingBox';import MessageBox from'../components/MessageBox';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function DashboardScreen(){var orderSummary=useSelector(function(state){return state.orderSummary;});var loading=orderSummary.loading,summary=orderSummary.summary,error=orderSummary.error;var dispatch=useDispatch();useEffect(function(){dispatch(summaryOrder());},[dispatch]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"\\u0421\\u0442\\u0430\\u0442\\u0438\\u0441\\u0442\\u0438\\u043A\\u0430\"})}),loading?/*#__PURE__*/_jsx(LoadingBox,{}):error?/*#__PURE__*/_jsx(MessageBox,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"ul\",{className:\"row summary\",children:[/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"summary-title color1\",children:/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-users\"}),\" \\u041A\\u043B\\u0438\\u0435\\u043D\\u0442\\u043E\\u0432\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"summary-body\",children:summary.users[0].numUsers})]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"summary-title color2\",children:/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-shopping-cart\"}),\" \\u0417\\u0430\\u043A\\u0430\\u0437\\u043E\\u0432\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"summary-body\",children:summary.orders[0]?summary.orders[0].numOrders:0})]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"summary-title color3\",children:/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-money\"}),\" \\u0412\\u044B\\u0440\\u0443\\u0447\\u043A\\u0430\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-body\",children:[summary.orders[0]?summary.orders[0].totalSales.toFixed(2):0,\" \\u0420\\u0443\\u0431\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0413\\u0440\\u0430\\u0444\\u0438\\u043A \\u0432\\u044B\\u0440\\u0443\\u0447\\u043A\\u0438\"}),summary.dailyOrders.length===0?/*#__PURE__*/_jsx(MessageBox,{children:\"\\u041D\\u0435\\u0442 \\u043F\\u0440\\u043E\\u0434\\u0430\\u0436\"}):/*#__PURE__*/_jsx(Chart,{width:\"100%\",height:\"400px\",chartType:\"AreaChart\",loader:/*#__PURE__*/_jsx(\"div\",{children:\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0436\\u0430\\u0435\\u043C \\u0433\\u0440\\u0430\\u0444\\u0438\\u043A...\"}),data:[['Дата','Продажи']].concat(_toConsumableArray(summary.dailyOrders.map(function(x){return[x._id,x.sales];})))})]})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u041A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u0438\"}),summary.productCategories.length===0?/*#__PURE__*/_jsx(MessageBox,{children:\"\\u041D\\u0435\\u0442\"}):/*#__PURE__*/_jsx(Chart,{width:\"100%\",height:\"400px\",chartType:\"PieChart\",loader:/*#__PURE__*/_jsx(\"div\",{children:\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0436\\u0430\\u0435\\u043C \\u0433\\u0440\\u0430\\u0444\\u0438\\u043A...\"}),data:[['Категории','Товары']].concat(_toConsumableArray(summary.productCategories.map(function(x){return[x._id,x.count];})))})]})]})]});}","map":{"version":3,"sources":["C:/Users/aloob/Desktop/pharmacy-site/frontend/src/screens/DashboardScreen.js"],"names":["React","useEffect","useDispatch","useSelector","Chart","summaryOrder","LoadingBox","MessageBox","DashboardScreen","orderSummary","state","loading","summary","error","dispatch","users","numUsers","orders","numOrders","totalSales","toFixed","dailyOrders","length","map","x","_id","sales","productCategories","count"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport Chart from 'react-google-charts';\nimport { summaryOrder } from '../actions/orderActions';\nimport LoadingBox from '../components/LoadingBox';\nimport MessageBox from '../components/MessageBox';\n\nexport default function DashboardScreen() {\n  const orderSummary = useSelector((state) => state.orderSummary);\n  const { loading, summary, error } = orderSummary;\n  const dispatch = useDispatch();\n  useEffect(() => {\n    dispatch(summaryOrder());\n  }, [dispatch]);\n  return (\n    <div>\n      <div className=\"row\">\n        <h1>Статистика</h1>\n      </div>\n      {loading ? (\n        <LoadingBox />\n      ) : error ? (\n        <MessageBox variant=\"danger\">{error}</MessageBox>\n      ) : (\n        <>\n          <ul className=\"row summary\">\n            <li>\n              <div className=\"summary-title color1\">\n                <span>\n                  <i className=\"fa fa-users\" /> Клиентов\n                </span>\n              </div>\n              <div className=\"summary-body\">{summary.users[0].numUsers}</div>\n            </li>\n            <li>\n              <div className=\"summary-title color2\">\n                <span>\n                  <i className=\"fa fa-shopping-cart\" /> Заказов\n                </span>\n              </div>\n              <div className=\"summary-body\">\n                {summary.orders[0] ? summary.orders[0].numOrders : 0}\n              </div>\n            </li>\n            <li>\n              <div className=\"summary-title color3\">\n                <span>\n                  <i className=\"fa fa-money\" /> Выручка\n                </span>\n              </div>\n              <div className=\"summary-body\">\n                \n                {summary.orders[0]\n                  ? summary.orders[0].totalSales.toFixed(2)\n                  : 0} Руб\n              </div>\n            </li>\n          </ul>\n          <div>\n            <div>\n              <h2>График выручки</h2>\n              {summary.dailyOrders.length === 0 ? (\n                <MessageBox>Нет продаж</MessageBox>\n              ) : (\n                <Chart\n                  width=\"100%\"\n                  height=\"400px\"\n                  chartType=\"AreaChart\"\n                  loader={<div>Загружаем график...</div>}\n                  data={[\n                    ['Дата', 'Продажи'],\n                    ...summary.dailyOrders.map((x) => [x._id, x.sales]),\n                  ]}\n                ></Chart>\n              )}\n            </div>\n          </div>\n          <div>\n            <h2>Категории</h2>\n            {summary.productCategories.length === 0 ? (\n              <MessageBox>Нет</MessageBox>\n            ) : (\n              <Chart\n                width=\"100%\"\n                height=\"400px\"\n                chartType=\"PieChart\"\n                loader={<div>Загружаем график...</div>}\n                data={[\n                  ['Категории', 'Товары'],\n                  ...summary.productCategories.map((x) => [x._id, x.count]),\n                ]}\n              />\n            )}\n          </div>\n        </>\n      )}\n    </div>\n  );\n}"]},"metadata":{},"sourceType":"module"}