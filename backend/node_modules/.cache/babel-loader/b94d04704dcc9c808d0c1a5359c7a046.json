{"ast":null,"code":"import React,{useEffect}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{listProductProviders,deleteProvider,createProvider}from\"../actions/productActions\";import LoadingBox from\"../components/LoadingBox\";import MessageBox from\"../components/MessageBox\";import{PRODUCT_PROVIDER_CREATE_RESET,PRODUCT_PROVIDER_DELETE_RESET}from\"../constants/productConstants\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function ProvidersScreen(props){var providerList=useSelector(function(state){return state.productProviderList;});var loading=providerList.loading,error=providerList.error,providers=providerList.providers;var providerDelete=useSelector(function(state){return state.productProviderDelete;});var providerCreate=useSelector(function(state){return state.productProviderCreate;});var loadingCreate=providerCreate.loading,errorCreate=providerCreate.error,successCreate=providerCreate.success,createdProvider=providerCreate.provider;var loadingDelete=providerDelete.loading,errorDelete=providerDelete.error,successDelete=providerDelete.success;var dispatch=useDispatch();useEffect(function(){if(successCreate){dispatch({type:PRODUCT_PROVIDER_CREATE_RESET});props.history.push(\"/provider/\".concat(createdProvider._id,\"/edit\"));window.location.reload(false);}if(successDelete){dispatch({type:PRODUCT_PROVIDER_DELETE_RESET});window.location.reload(false);}dispatch(listProductProviders());},[createdProvider,dispatch,props.history,successCreate,successDelete]);var clickHandler=function clickHandler(){dispatch(createProvider());};var deleteHandler=function deleteHandler(provider){if(window.confirm(\"Вы уверены?\")){dispatch(deleteProvider(provider._id));}};return/*#__PURE__*/_jsxs(\"div\",{className:\"tableDiv\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"row center\",children:\"\\u0423\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435 \\u043F\\u043E\\u0441\\u0442\\u0430\\u0432\\u0449\\u0438\\u043A\\u0430\\u043C\\u0438\"}),loadingDelete&&/*#__PURE__*/_jsx(LoadingBox,{}),errorDelete&&/*#__PURE__*/_jsx(MessageBox,{variant:\"danger\",children:errorDelete}),loadingCreate&&/*#__PURE__*/_jsx(LoadingBox,{}),errorCreate&&/*#__PURE__*/_jsx(MessageBox,{variant:\"danger\",children:errorCreate}),loading?/*#__PURE__*/_jsx(LoadingBox,{}):error?/*#__PURE__*/_jsx(MessageBox,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u041D\\u0430\\u0438\\u043C\\u0435\\u043D\\u043E\\u0432\\u0430\\u043D\\u0438\\u0435 \\u043F\\u043E\\u0441\\u0442\\u0430\\u0432\\u0449\\u0438\\u043A\\u0430\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u041D\\u043E\\u043C\\u0435\\u0440 \\u0442\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\\u0430 \\u043F\\u043E\\u0441\\u0442\\u0430\\u0432\\u0449\\u0438\\u043A\\u0430\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0414\\u0435\\u0439\\u0441\\u0442\\u0432\\u0438\\u044F\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:providers.map(function(provider){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:provider._id}),/*#__PURE__*/_jsx(\"td\",{children:provider.name}),/*#__PURE__*/_jsx(\"td\",{children:provider.phoneNumber}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"small\",onClick:function onClick(){return props.history.push(\"/provider/\".concat(provider._id,\"/edit\"));},children:\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"small\",onClick:function onClick(){return deleteHandler(provider);},children:\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"})]})]},provider._id);})})]}),/*#__PURE__*/_jsx(\"button\",{style:{width:\"20%\",margin:\"2rem 40%\",borderRadius:\"0\"},type:\"button\",className:\"shadow\",onClick:clickHandler,children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u043D\\u043E\\u0432\\u043E\\u0433\\u043E \\u043F\\u043E\\u0441\\u0442\\u0430\\u0432\\u0449\\u0438\\u043A\\u0430\"})]});}","map":{"version":3,"sources":["C:/Users/aloob/Desktop/pharmacy-site/frontend/src/screens/ProvidersScreen.js"],"names":["React","useEffect","useDispatch","useSelector","listProductProviders","deleteProvider","createProvider","LoadingBox","MessageBox","PRODUCT_PROVIDER_CREATE_RESET","PRODUCT_PROVIDER_DELETE_RESET","ProvidersScreen","props","providerList","state","productProviderList","loading","error","providers","providerDelete","productProviderDelete","providerCreate","productProviderCreate","loadingCreate","errorCreate","successCreate","success","createdProvider","provider","loadingDelete","errorDelete","successDelete","dispatch","type","history","push","_id","window","location","reload","clickHandler","deleteHandler","confirm","map","name","phoneNumber","width","margin","borderRadius"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport {\n  listProductProviders,\n  deleteProvider,\n  createProvider,\n} from \"../actions/productActions\";\nimport LoadingBox from \"../components/LoadingBox\";\nimport MessageBox from \"../components/MessageBox\";\nimport {\n\n  PRODUCT_PROVIDER_CREATE_RESET,\n  PRODUCT_PROVIDER_DELETE_RESET,\n\n} from \"../constants/productConstants\";\n\nexport default function ProvidersScreen(props) {\n  const providerList = useSelector((state) => state.productProviderList);\n  const { loading, error, providers } = providerList;\n\n  const providerDelete = useSelector(\n    (state) => state.productProviderDelete\n  );\n  const providerCreate = useSelector(\n    (state) => state.productProviderCreate\n  );\n  const {\n    loading: loadingCreate,\n    error: errorCreate,\n    success: successCreate,\n    provider: createdProvider,\n  } = providerCreate;\n  const {\n    loading: loadingDelete,\n    error: errorDelete,\n    success: successDelete,\n  } = providerDelete;\n\n  const dispatch = useDispatch();\n  useEffect(() => {\n    if (successCreate) {\n      dispatch({ type: PRODUCT_PROVIDER_CREATE_RESET });\n      props.history.push(`/provider/${createdProvider._id}/edit`);\n      window.location.reload(false);\n    }\n    if (successDelete) {\n      dispatch({ type: PRODUCT_PROVIDER_DELETE_RESET });\n      window.location.reload(false);\n    }\n    dispatch(listProductProviders());\n  }, [\n    createdProvider,\n    dispatch,\n    props.history,\n    successCreate,\n    successDelete,\n  ]);\n\n  const clickHandler = () => {\n    dispatch(createProvider());\n  };\n  const deleteHandler = (provider) => {\n    if (window.confirm(\"Вы уверены?\")) {\n      dispatch(deleteProvider(provider._id));\n    }\n  };\n\n  return (\n    <div className=\"tableDiv\">\n    <h1 className=\"row center\">Управление поставщиками</h1>\n      \n      {loadingDelete && <LoadingBox></LoadingBox>}\n      {errorDelete && <MessageBox variant=\"danger\">{errorDelete}</MessageBox>}\n\n      {loadingCreate && <LoadingBox></LoadingBox>}\n      {errorCreate && <MessageBox variant=\"danger\">{errorCreate}</MessageBox>}\n      {loading ? (\n        <LoadingBox></LoadingBox>\n      ) : error ? (\n        <MessageBox variant=\"danger\">{error}</MessageBox>\n      ) : (\n        <table className=\"table\">\n          <thead>\n            <tr>\n              <th>ID</th>\n              <th>Наименование поставщика</th>\n              <th>Номер телефона поставщика</th>\n              <th>Действия</th>\n            </tr>\n          </thead>\n          <tbody>\n            {providers.map((provider) => (\n              <tr key={provider._id}>\n                <td>{provider._id}</td>\n                <td>{provider.name}</td>\n                <td>{provider.phoneNumber}</td>\n                <td>\n                  <button\n                    type=\"button\"\n                    className=\"small\"\n                    onClick={() =>\n                      props.history.push(`/provider/${provider._id}/edit`)\n                    }\n                  >\n                    Редактировать\n                  </button>\n                  <button\n                    type=\"button\"\n                    className=\"small\"\n                    onClick={() => deleteHandler(provider)}\n                  >\n                    Удалить\n                  </button>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n        \n      )}\n      <button\n        style={{ width: \"20%\",margin: \"2rem 40%\",  borderRadius: \"0\" }}\n        type=\"button\"\n        className=\"shadow\"\n        onClick={clickHandler}\n      >\n        Добавить нового поставщика\n      </button>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}